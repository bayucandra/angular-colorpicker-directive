/*
 * Color Picker Angular directive
 *
 * Alberto Pujante
 *
 * @licence: http://opensource.org/licenses/MIT
 */
!function(e){"use strict";angular.module("colorpicker",[])}(),function(b){"use strict";b.module("colorpicker").directive("colorPicker",["$document","$compile","ColorHelper",function(m,x,k){return{restrict:"A",scope:{colorPickerModel:"=",colorPickerOutputFormat:"=",colorPickerDisabled:"=?"},controller:["$scope",function(a){function r(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:e.a}}a.show=!1,a.sAndLMax={},a.hueMax={},a.alphaMax={},a.type=0,a.hsva={h:.5,s:1,v:1,a:1},a.hueSlider={left:0},a.sAndLSlider={left:0,top:0},a.alphaSlider={left:0},a.rbgaSteps={r:1,g:1,b:1,a:.1},a.hslaSteps={h:1,s:1,l:1,a:.1},a.cancelButtonClass="",a.showCancelButton=!1,a.extraLargeClass="",a.hexOnly=!1,a.parentSelector="body",a.colorPresets=[],a.hasColorPresets=!1,"rgba"===a.colorPickerOutputFormat?a.type=1:"hsla"===a.colorPickerOutputFormat&&(a.type=2),a.setSaturation=function(e,t){var o=k.hsva2hsla(a.hsva);o.s=e/t,a.hsva=k.hsla2hsva(o)},a.setLightness=function(e,t){var o=k.hsva2hsla(a.hsva);o.l=e/t,a.hsva=k.hsla2hsva(o)},a.setHue=function(e,t){a.hsva.h=e/t},a.setAlpha=function(e,t){a.hsva.a=e/t},a.setR=function(e,t){var o=k.hsvaToRgba(a.hsva);o.r=e/t,a.hsva=k.rgbaToHsva(o)},a.setG=function(e,t){var o=k.hsvaToRgba(a.hsva);o.g=e/t,a.hsva=k.rgbaToHsva(o)},a.setB=function(e,t){var o=k.hsvaToRgba(a.hsva);o.b=e/t,a.hsva=k.rgbaToHsva(o)},a.setSaturationAndBrightness=function(e,t,o,r){a.hsva.s=e/o,a.hsva.v=t/r},a.update=function(){var e=k.hsva2hsla(a.hsva);a.hslaText={h:Math.round(360*e.h),s:Math.round(100*e.s),l:Math.round(100*e.l),a:Math.round(100*e.a)/100};var t=r(k.hsvaToRgba(a.hsva)),o=r(k.hsvaToRgba({h:a.hsva.h,s:1,v:1,a:1}));if(a.rgbaText={r:t.r,g:t.g,b:t.b,a:Math.round(100*t.a)/100},a.hexText="#"+(1<<24|parseInt(t.r,10)<<16|parseInt(t.g,10)<<8|parseInt(t.b,10)).toString(16).substr(1),a.alphaSliderColor="rgb("+t.r+","+t.g+","+t.b+")",a.hueSliderColor="rgb("+o.r+","+o.g+","+o.b+")",0===a.type&&a.hsva.a<1&&a.type++,a.hsva.a<1)switch(a.colorPickerOutputFormat){case"hsla":a.outputColor="hsla("+a.hslaText.h+","+a.hslaText.s+"%,"+a.hslaText.l+"%,"+a.hslaText.a+")";break;default:a.outputColor="rgba("+t.r+","+t.g+","+t.b+","+Math.round(100*t.a)/100+")"}else switch(a.colorPickerOutputFormat){case"hsla":a.outputColor="hsl("+a.hslaText.h+","+a.hslaText.s+"%,"+a.hslaText.l+"%)";break;case"rgba":a.outputColor=a.alphaSliderColor;break;default:a.outputColor=a.hexText}a.sAndLSlider={left:a.hsva.s*a.sAndLMax.x-8+"px",top:(1-a.hsva.v)*a.sAndLMax.y-8+"px"},a.hueSlider.left=a.hsva.h*a.hueMax.x-8+"px",a.alphaSlider.left=a.hsva.a*a.alphaMax.x-8+"px",a.alphaInvalidClass=""},a.setColorFromHex=function(e){var t=k.stringToHsva(e);return null!==t&&(a.hsva=t),t},a.typePolicy=function(){return a.type=(a.type+1)%3,0===a.type&&a.hsva.a<1&&a.type++,a.type}}],link:function(o,t,r){var a,s="";if(void 0===o.colorPickerModel&&(o.colorPickerModel="#008fff",t.val("")),void 0===r.colorPickerShowValue&&(r.colorPickerShowValue="true"),void 0===r.colorPickerPosition&&(r.colorPickerPosition="right"),void 0===r.colorPickerShowInputSpinner&&(r.colorPickerShowInputSpinner="false"),void 0===r.colorPickerShowCancelButton&&(r.colorPickerShowCancelButton="false"),"true"===r.colorPickerShowCancelButton&&(o.showCancelButton=!0,o.extraLargeClass="color-picker-extra-large"),void 0!==r.colorPickerCancelButtonClass&&(o.cancelButtonClass=r.colorPickerCancelButtonClass),void 0!==r.colorPickerSpinnerRgbaSteps&&null!==r.colorPickerSpinnerRgbaSteps.match(/^\d+;\d+;\d+;[0-9]+([\.][0-9]{1,2})?$/)){var e=r.colorPickerSpinnerRgbaSteps.split(";");o.rbgaSteps={r:e[0],g:e[1],b:e[2],a:e[3]}}if(void 0!==r.colorPickerSpinnerHslaSteps&&null!==r.colorPickerSpinnerHslaSteps.match(/^\d+;\d+;\d+;[0-9]+([\.][0-9]{1,2})?$/)){e=r.colorPickerSpinnerHslaSteps.split(";");o.hslaSteps={h:e[0],s:e[1],l:e[2],a:e[3]}}if(c(o.colorPickerModel),"true"===r.colorPickerShowValue&&t.val(o.outputColor),"true"===r.colorPickerHexOnly&&(o.hexOnly=!0),void 0!==r.colorPickerParentSelector&&null!==document.querySelector(r.colorPickerParentSelector)&&(o.parentSelector=r.colorPickerParentSelector),void 0!==r.colorPickerColorPresets){var n=[];try{n=r.colorPickerColorPresets.split(",");for(var i=0;i<n.length;i++){var l=k.trim(n[i]);k.isHexValid(l)&&-1===o.colorPresets.indexOf(l)&&o.colorPresets.push(l)}}catch(e){console.error("Error::attr.colorPickerColorPresets: "+e.message)}}function c(e){var t=k.stringToHsva(e);null!==t&&(o.hsva=t,o.update())}function u(){setTimeout(function(){p()},5)}function p(){o.$apply(function(){r.colorPickerShowValue="true",c(t.val()),o.colorPickerModel=t.val()})}function h(e){!0!==o.colorPickerDisabled&&(s=o.colorPickerModel,o.$apply(function(){o.show=!0}),o.$apply(function(){o.sAndLMax={x:a[0].getElementsByClassName("saturation-lightness")[0].offsetWidth,y:a[0].getElementsByClassName("saturation-lightness")[0].offsetHeight},o.hueMax={x:a[0].getElementsByClassName("hue")[0].offsetWidth},o.alphaMax={x:a[0].getElementsByClassName("alpha")[0].offsetWidth},o.update()}),v(),m.on("mousedown",g),b.element(window).on("resize",d))}function d(){v()}function v(){var e;"true"===r.colorPickerFixedPosition?(e=f(t[0],!1),a[0].style.position="fixed"):e=f(t[0],!0),"left"===r.colorPickerPosition?(a[0].style.top=e.top+"px",a[0].style.left=e.left-252+"px"):"top"===r.colorPickerPosition?(a[0].style.top=e.top-e.height-284+"px",a[0].style.left=e.left+"px"):"bottom"===r.colorPickerPosition?(a[0].style.top=e.top+e.height+10+"px",a[0].style.left=e.left+"px"):(a[0].style.top=e.top+"px",a[0].style.left=e.left+e.width+"px")}function g(e){e.target===t[0]||a[0]===e.target||function(e,t){var o=t.parentNode;for(;null!==o;){if(o===e)return!0;o=o.parentNode}return!1}(a[0],e.target)||(o.$apply(function(){o.show=!1}),m.off("mousedown",g),b.element(window).off("resize",d))}function f(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}o.colorPresetSelect=function(e){o.hexText=e,o.setColorFromHex(e),c(e),"true"===r.colorPickerShowValue&&t.val(e),o.colorPickerModel=e},0<o.colorPresets.length&&(o.hasColorPresets=!0),a=b.element('<div ng-show="show" class="color-picker {{extraLargeClass}}" ng-class="{ \'color-picker--hex-only\' : hexOnly, \'color-picker--has-color-presets\': hasColorPresets }">   <div class="arrow arrow-'+r.colorPickerPosition+'"></div>   <div slider rg-x=1 rg-y=1 action="setSaturationAndBrightness(s, v, rgX, rgY)" class="saturation-lightness" ng-style="{\'background-color\':hueSliderColor}">       <div class="cursor-sv" ng-style="{\'top\':sAndLSlider.top, \'left\':sAndLSlider.left}"></div>   </div>   <div slider rg-x=1 action="setHue(v, rg)" class="hue">       <div class="cursor" ng-style="{\'left\':hueSlider.left}"></div>   </div>   <div slider rg-x=1 action="setAlpha(v, rg)" class="alpha" ng-style="{\'background-color\':alphaSliderColor}">       <div class="cursor" ng-style="{\'left\':alphaSlider.left}"></div>   </div>   <div class="selected-color-background"></div>   <div class="selected-color" ng-style="{\'background-color\':outputColor}"></div>   <div ng-show="type==2" class="hsla-text">       <input text type="number" pattern="[0-9]*" min="0" max="360" step="'+o.hslaSteps.h+'" rg=360 action="setHue(v, rg)" ng-model="hslaText.h" spinner="'+r.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="100" step="'+o.hslaSteps.s+'" rg=100 action="setSaturation(v, rg)" ng-model="hslaText.s" spinner="'+r.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="100" step="'+o.hslaSteps.l+'" rg=100 action="setLightness(v, rg)" ng-model="hslaText.l" spinner="'+r.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]+([.,][0-9]{1,2})?" min="0" max="1" step="'+o.hslaSteps.a+'" rg=1 action="setAlpha(v, rg)" ng-model="hslaText.a" spinner="'+r.colorPickerShowInputSpinner+'" />       <div>H</div><div>S</div><div>L</div><div>A</div>   </div>   <div ng-show="type==1" class="rgba-text">       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+o.rbgaSteps.r+'" rg=255 action="setR(v, rg)" ng-model="rgbaText.r" spinner="'+r.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+o.rbgaSteps.g+'" rg=255 action="setG(v, rg)" ng-model="rgbaText.g" spinner="'+r.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+o.rbgaSteps.b+'" rg=255 action="setB(v, rg)" ng-model="rgbaText.b" spinner="'+r.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]+([.,][0-9]{1,2})?" min="0" max="1" step="'+o.rbgaSteps.a+'" rg=1 action="setAlpha(v, rg)" ng-model="rgbaText.a" spinner="'+r.colorPickerShowInputSpinner+'" />       <div>R</div><div>G</div><div>B</div><div>A</div>   </div>   <div class="hex-text" ng-show="type==0">       <input text type="text" action="setColorFromHex(string)" ng-model="hexText"/>       <div>Hex</div>   </div>   <div ng-click="typePolicy()" class="type-policy"></div>   <div class="color-presets" ng-if="hasColorPresets">     <div class="color-presets__title">Warna Global</div>     <div class="color-presets__picker-wrapper">       <div class="preset-picker" ng-repeat="preset in colorPresets" ng-class="{ \'is-last\': $last }" ng-style="{ \'background-color\': preset }" ng-click="colorPresetSelect( preset )"></div>     </div>   </div>   <div class="footer-action">       <div class="reset-btn widget-button-ripple" ng-click="resetColor()">Reset</div>       <div class="save-btn widget-button-ripple" ng-click="save()">Simpan</div>   </div>   <button type="button" class="{{cancelButtonClass}}" ng-show="showCancelButton" ng-click="cancelColor()">Cancel</button></div>'),document.querySelector(o.parentSelector).appendChild(a[0]),x(a)(o),t.on("paste",u),t.on("keyup",p),o.$on("color-changed",function(e){o.$apply(function(){o.update(),o.colorPickerModel=o.outputColor,"true"===r.colorPickerShowValue&&t.val(o.outputColor)})}),o.cancelColor=function(){o.colorPickerModel=s,o.show=!1,c(o.colorPickerModel),m.off("mousedown",g),b.element(window).off("resize",d)},o.resetColor=function(){o.colorPickerModel=s,c(o.colorPickerModel)},o.save=function(){o.show=!1},t.on("click",h),t.on("$destroy",function(){t.off("click",h),t.off("keyup",p),t.off("paste",u)})}}}])}(angular),function(e){"use strict";angular.module("colorpicker").factory("ColorHelper",function(){return{hsla2hsva:function(e){var t=Math.min(e.h,1),o=Math.min(e.s,1),r=Math.min(e.l,1),a=Math.min(e.a,1);if(0===r)return{h:t,s:0,v:0,a:a};var s=r+o*(1-Math.abs(2*r-1))/2;return{h:t,s:2*(s-r)/s,v:s,a:a}},hsva2hsla:function(e){var t=e.h,o=e.s,r=e.v,a=e.a;if(0===r)return{h:t,s:0,l:0,a:a};if(0===o&&1===r)return{h:t,s:1,l:1,a:a};var s=r*(2-o)/2;return{h:t,s:r*o/(1-Math.abs(2*s-1)),l:s,a:a}},rgbaToHsva:function(e){var t,o,r=Math.min(e.r,1),a=Math.min(e.g,1),s=Math.min(e.b,1),n=Math.min(e.a,1),i=Math.max(r,a,s),l=Math.min(r,a,s),c=i,u=i-l;if(o=0===i?0:u/i,i===l)t=0;else{switch(i){case r:t=(a-s)/u+(a<s?6:0);break;case a:t=(s-r)/u+2;break;case s:t=(r-a)/u+4}t/=6}return{h:t,s:o,v:c,a:n}},hsvaToRgba:function(e){var t,o,r,a=e.h,s=e.s,n=e.v,i=e.a,l=Math.floor(6*a),c=6*a-l,u=n*(1-s),p=n*(1-c*s),h=n*(1-(1-c)*s);switch(l%6){case 0:t=n,o=h,r=u;break;case 1:t=p,o=n,r=u;break;case 2:t=u,o=n,r=h;break;case 3:t=u,o=p,r=n;break;case 4:t=h,o=u,r=n;break;case 5:t=n,o=u,r=p}return{r:t,g:o,b:r,a:i}},stringToHsva:function(e){var t=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return["rgb",parseInt(e[2]),parseInt(e[3]),parseInt(e[4]),isNaN(parseFloat(e[5]))?1:parseFloat(e[5])]}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return["hsl",parseInt(e[2]),parseInt(e[3]),parseInt(e[4]),isNaN(parseFloat(e[5]))?1:parseFloat(e[5])]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return["hex",parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return["hex",parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}];e=e.toLowerCase();var o=null;for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],s=a.re.exec(e),n=s&&a.parse(s);if(n)return o="hex"===n[0]||"rgb"===n[0]?this.rgbaToHsva({r:n[1]/255,g:n[2]/255,b:n[3]/255,a:n[4]}):this.hsla2hsva({h:n[1]/360,s:n[2]/100,l:n[3]/100,a:n[4]})}return o},isHexValid:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}})}(),function(e){"use strict";angular.module("colorpicker").directive("slider",["$document","$window",function(r,h){return{restrict:"A",scope:{action:"&"},link:function(c,u,p){function e(e){o(e),r.on("mousemove touchmove",t)}function t(e){e.preventDefault(),o(e)}function o(e){var t,o,r,a,s=u[0].offsetHeight,n=u[0].offsetWidth,i=Math.max(0,Math.min((t=e,o=u[0],(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-o.getBoundingClientRect().left-h.pageXOffset),n)),l=Math.max(0,Math.min((r=e,a=u[0],(void 0!==r.pageY?r.pageY:r.touches[0].pageY)-a.getBoundingClientRect().top-h.pageYOffset),s));void 0!==p.rgX&&void 0!==p.rgY?c.action({s:i/n,v:1-l/s,rgX:p.rgX,rgY:p.rgY}):c.action({v:i/n,rg:p.rgX}),c.$emit("color-changed")}u.on("mousedown touchstart",e),r.on("mouseup touchend",function(){r.off("mousemove touchmove",t)}),u.on("$destroy",function(){u.off("mousedown touchend",e)})}}}])}(),function(e){"use strict";angular.module("colorpicker").directive("text",[function(){return{restrict:"A",scope:{action:"&"},link:function(o,r,a){function e(e){"true"===a.spinner&&r.removeClass("color-picker-input-spinner")}function t(e){r.addClass("color-picker-input-spinner")}function s(e){setTimeout(function(){n(e)},5)}function n(e){if(void 0===a.rg)o.action({string:r.val()})&&o.$emit("color-changed");else{var t=parseFloat(r.val());isNaN(t)?o.$emit("alpha-invalid"):(t=Math.abs(Math.min(parseFloat(r.val()),a.rg)),o.action({v:t,rg:a.rg}),o.$emit("color-changed"),o.$emit("alpha-valid"))}}r.on("paste",s),r.on("keyup",n),r.on("change",n),r.on("focus",e),r.on("blur",t),r.on("mouseover",e),r.on("mouseout",t),r.addClass("color-picker-input-spinner"),r.on("$destroy",function(){r.off("paste",s),r.off("keyup",n),r.off("change",n),r.off("focus",e),r.off("blur",t),r.off("mouseover",e),r.off("mouseout",t)})}}}])}();
//# sourceMappingURL=color-picker.min.js.map
